'use strict';

var _extends = require('babel-runtime/helpers/extends')['default'];

var _slicedToArray = require('babel-runtime/helpers/sliced-to-array')['default'];

var _getIterator = require('babel-runtime/core-js/get-iterator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _libUtils = require('../lib/utils');

var _helpers = require('./helpers');

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var should = _chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('utils', function () {
  describe('parseCapsForInnerDriver()', function () {
    it('should return JSONWP caps unchanged if only JSONWP caps provided', function () {
      var _parseCapsForInnerDriver = (0, _libUtils.parseCapsForInnerDriver)(_helpers.BASE_CAPS);

      var desiredCaps = _parseCapsForInnerDriver.desiredCaps;
      var processedJsonwpCapabilities = _parseCapsForInnerDriver.processedJsonwpCapabilities;
      var processedW3CCapabilities = _parseCapsForInnerDriver.processedW3CCapabilities;
      var protocol = _parseCapsForInnerDriver.protocol;

      desiredCaps.should.deep.equal(_helpers.BASE_CAPS);
      processedJsonwpCapabilities.should.deep.equal(_helpers.BASE_CAPS);
      should.not.exist(processedW3CCapabilities);
      protocol.should.equal('MJSONWP');
    });
    it('should return W3C caps unchanged if only W3C caps were provided', function () {
      var _parseCapsForInnerDriver2 = (0, _libUtils.parseCapsForInnerDriver)(undefined, _helpers.W3C_CAPS);

      var desiredCaps = _parseCapsForInnerDriver2.desiredCaps;
      var processedJsonwpCapabilities = _parseCapsForInnerDriver2.processedJsonwpCapabilities;
      var processedW3CCapabilities = _parseCapsForInnerDriver2.processedW3CCapabilities;
      var protocol = _parseCapsForInnerDriver2.protocol;

      desiredCaps.should.deep.equal(_helpers.BASE_CAPS);
      should.not.exist(processedJsonwpCapabilities);
      processedW3CCapabilities.should.deep.equal(_helpers.W3C_CAPS);
      protocol.should.equal('W3C');
    });
    it('should return JSONWP and W3C caps if both were provided', function () {
      var _parseCapsForInnerDriver3 = (0, _libUtils.parseCapsForInnerDriver)(_helpers.BASE_CAPS, _helpers.W3C_CAPS);

      var desiredCaps = _parseCapsForInnerDriver3.desiredCaps;
      var processedJsonwpCapabilities = _parseCapsForInnerDriver3.processedJsonwpCapabilities;
      var processedW3CCapabilities = _parseCapsForInnerDriver3.processedW3CCapabilities;
      var protocol = _parseCapsForInnerDriver3.protocol;

      desiredCaps.should.deep.equal(_helpers.BASE_CAPS);
      processedJsonwpCapabilities.should.deep.equal(_helpers.BASE_CAPS);
      processedW3CCapabilities.should.deep.equal(_helpers.W3C_CAPS);
      protocol.should.equal('W3C');
    });
    it('should include default capabilities in results', function () {
      var _parseCapsForInnerDriver4 = (0, _libUtils.parseCapsForInnerDriver)(_helpers.BASE_CAPS, _helpers.W3C_CAPS, {}, { foo: 'bar' });

      var desiredCaps = _parseCapsForInnerDriver4.desiredCaps;
      var processedJsonwpCapabilities = _parseCapsForInnerDriver4.processedJsonwpCapabilities;
      var processedW3CCapabilities = _parseCapsForInnerDriver4.processedW3CCapabilities;

      desiredCaps.should.deep.equal(_extends({ foo: 'bar' }, _helpers.BASE_CAPS));
      processedJsonwpCapabilities.should.deep.equal(_extends({ foo: 'bar' }, _helpers.BASE_CAPS));
      processedW3CCapabilities.alwaysMatch.should.deep.equal(_extends({ 'appium:foo': 'bar' }, (0, _libUtils.insertAppiumPrefixes)(_helpers.BASE_CAPS)));
    });
    it('should reject if W3C caps are not passing constraints', function () {
      var err = (0, _libUtils.parseCapsForInnerDriver)(undefined, _helpers.W3C_CAPS, { hello: { presence: true } }).error;
      err.message.should.match(/'hello' can't be blank/);
      _lodash2['default'].isError(err).should.be['true'];
    });
    it('should only accept W3C caps that have passing constraints', function () {
      var w3cCaps = _extends({}, _helpers.W3C_CAPS, {
        firstMatch: [{ foo: 'bar' }, { hello: 'world' }]
      });

      var _parseCapsForInnerDriver5 = (0, _libUtils.parseCapsForInnerDriver)(_helpers.BASE_CAPS, w3cCaps, { hello: { presence: true } });

      var desiredCaps = _parseCapsForInnerDriver5.desiredCaps;
      var processedJsonwpCapabilities = _parseCapsForInnerDriver5.processedJsonwpCapabilities;
      var processedW3CCapabilities = _parseCapsForInnerDriver5.processedW3CCapabilities;
      var protocol = _parseCapsForInnerDriver5.protocol;

      var expectedResult = _extends({ hello: 'world' }, _helpers.BASE_CAPS);
      desiredCaps.should.deep.equal(expectedResult);
      processedJsonwpCapabilities.should.deep.equal(_extends({}, _helpers.BASE_CAPS));
      processedW3CCapabilities.alwaysMatch.should.deep.equal((0, _libUtils.insertAppiumPrefixes)(expectedResult));
      protocol.should.equal('W3C');
    });
    it('should add appium prefixes to W3C caps that are not standard in W3C', function () {
      (0, _libUtils.parseCapsForInnerDriver)(undefined, {
        alwaysMatch: {
          platformName: 'Fake',
          propertyName: 'PROP_NAME'
        }
      }).processedW3CCapabilities.should.deep.equal({
        alwaysMatch: {
          platformName: 'Fake',
          'appium:propertyName': 'PROP_NAME'
        },
        firstMatch: [{}]
      });
    });
    it('should merge extraneous MJSONWP caps into W3C', function () {
      var jsonwpCaps = _extends({}, _helpers.BASE_CAPS, {
        automationName: 'Fake'
      });

      var _parseCapsForInnerDriver6 = (0, _libUtils.parseCapsForInnerDriver)(jsonwpCaps, {
        alwaysMatch: { platformName: 'Fake', propertyName: 'PROP_NAME' }
      });

      var desiredCaps = _parseCapsForInnerDriver6.desiredCaps;
      var processedJsonwpCapabilities = _parseCapsForInnerDriver6.processedJsonwpCapabilities;
      var processedW3CCapabilities = _parseCapsForInnerDriver6.processedW3CCapabilities;
      var protocol = _parseCapsForInnerDriver6.protocol;

      // We expect a combo of jsonwp caps and w3c provided caps with `appium:` prefix for non-standard caps
      var expectedCaps = {};

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = _getIterator(_lodash2['default'].toPairs(jsonwpCaps)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var _step$value = _slicedToArray(_step.value, 2);

          var key = _step$value[0];
          var value = _step$value[1];

          if (key !== 'platformName') {
            expectedCaps['appium:' + key] = value;
          } else {
            expectedCaps[key] = value;
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator['return']) {
            _iterator['return']();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      expectedCaps['appium:propertyName'] = 'PROP_NAME';

      processedW3CCapabilities.alwaysMatch.should.eql(expectedCaps);
      desiredCaps.should.eql(_extends({}, jsonwpCaps, {
        propertyName: 'PROP_NAME'
      }));
      processedJsonwpCapabilities.should.eql(jsonwpCaps);
      protocol.should.equal('W3C');
    });
    it('should fix W3C caps by using MJSONWP if invalid W3C caps were provided', function () {
      var w3cCapabilities = {
        alwaysMatch: { platformName: 'Fake', propertyName: 'PROP_NAME' }
      };
      var constraints = {
        deviceName: {
          presence: true
        }
      };

      var _parseCapsForInnerDriver7 = (0, _libUtils.parseCapsForInnerDriver)(_extends({}, _helpers.BASE_CAPS), w3cCapabilities, constraints);

      var desiredCaps = _parseCapsForInnerDriver7.desiredCaps;
      var processedJsonwpCapabilities = _parseCapsForInnerDriver7.processedJsonwpCapabilities;
      var processedW3CCapabilities = _parseCapsForInnerDriver7.processedW3CCapabilities;
      var protocol = _parseCapsForInnerDriver7.protocol;

      processedW3CCapabilities.should.exist;
      desiredCaps.should.eql(_extends({}, _helpers.BASE_CAPS, { propertyName: 'PROP_NAME' }));
      processedJsonwpCapabilities.should.eql(_helpers.BASE_CAPS);
      protocol.should.equal('W3C');
    });
  });

  describe('insertAppiumPrefixes()', function () {
    it('should apply prefixes to non-standard capabilities', function () {
      (0, _libUtils.insertAppiumPrefixes)({
        someCap: 'someCap'
      }).should.deep.equal({
        'appium:someCap': 'someCap'
      });
    });
    it('should not apply prefixes to standard capabilities', function () {
      (0, _libUtils.insertAppiumPrefixes)({
        browserName: 'BrowserName',
        platformName: 'PlatformName'
      }).should.deep.equal({
        browserName: 'BrowserName',
        platformName: 'PlatformName'
      });
    });
    it('should not apply prefixes to capabilities that already have a prefix', function () {
      (0, _libUtils.insertAppiumPrefixes)({
        'appium:someCap': 'someCap',
        'moz:someOtherCap': 'someOtherCap'
      }).should.deep.equal({
        'appium:someCap': 'someCap',
        'moz:someOtherCap': 'someOtherCap'
      });
    });
    it('should apply prefixes to non-prefixed, non-standard capabilities; should not apply prefixes to any other capabilities', function () {
      (0, _libUtils.insertAppiumPrefixes)({
        'appium:someCap': 'someCap',
        'moz:someOtherCap': 'someOtherCap',
        browserName: 'BrowserName',
        platformName: 'PlatformName',
        someOtherCap: 'someOtherCap',
        yetAnotherCap: 'yetAnotherCap'
      }).should.deep.equal({
        'appium:someCap': 'someCap',
        'moz:someOtherCap': 'someOtherCap',
        browserName: 'BrowserName',
        platformName: 'PlatformName',
        'appium:someOtherCap': 'someOtherCap',
        'appium:yetAnotherCap': 'yetAnotherCap'
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,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LDhCQUFzQixFQUFFLGVBQWU7T0FDeEMsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvdXRpbHMtc3BlY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCB7IHBhcnNlQ2Fwc0ZvcklubmVyRHJpdmVyLCBpbnNlcnRBcHBpdW1QcmVmaXhlcyB9IGZyb20gJy4uL2xpYi91dGlscyc7XG5pbXBvcnQgeyBCQVNFX0NBUFMsIFczQ19DQVBTIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cblxuY29uc3Qgc2hvdWxkID0gY2hhaS5zaG91bGQoKTtcbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxuZGVzY3JpYmUoJ3V0aWxzJywgZnVuY3Rpb24gKCkge1xuICBkZXNjcmliZSgncGFyc2VDYXBzRm9ySW5uZXJEcml2ZXIoKScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBKU09OV1AgY2FwcyB1bmNoYW5nZWQgaWYgb25seSBKU09OV1AgY2FwcyBwcm92aWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB7ZGVzaXJlZENhcHMsIHByb2Nlc3NlZEpzb253cENhcGFiaWxpdGllcywgcHJvY2Vzc2VkVzNDQ2FwYWJpbGl0aWVzLCBwcm90b2NvbH0gPSBwYXJzZUNhcHNGb3JJbm5lckRyaXZlcihCQVNFX0NBUFMpO1xuICAgICAgZGVzaXJlZENhcHMuc2hvdWxkLmRlZXAuZXF1YWwoQkFTRV9DQVBTKTtcbiAgICAgIHByb2Nlc3NlZEpzb253cENhcGFiaWxpdGllcy5zaG91bGQuZGVlcC5lcXVhbChCQVNFX0NBUFMpO1xuICAgICAgc2hvdWxkLm5vdC5leGlzdChwcm9jZXNzZWRXM0NDYXBhYmlsaXRpZXMpO1xuICAgICAgcHJvdG9jb2wuc2hvdWxkLmVxdWFsKCdNSlNPTldQJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVzNDIGNhcHMgdW5jaGFuZ2VkIGlmIG9ubHkgVzNDIGNhcHMgd2VyZSBwcm92aWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB7ZGVzaXJlZENhcHMsIHByb2Nlc3NlZEpzb253cENhcGFiaWxpdGllcywgcHJvY2Vzc2VkVzNDQ2FwYWJpbGl0aWVzLCBwcm90b2NvbH0gPSBwYXJzZUNhcHNGb3JJbm5lckRyaXZlcih1bmRlZmluZWQsIFczQ19DQVBTKTtcbiAgICAgIGRlc2lyZWRDYXBzLnNob3VsZC5kZWVwLmVxdWFsKEJBU0VfQ0FQUyk7XG4gICAgICBzaG91bGQubm90LmV4aXN0KHByb2Nlc3NlZEpzb253cENhcGFiaWxpdGllcyk7XG4gICAgICBwcm9jZXNzZWRXM0NDYXBhYmlsaXRpZXMuc2hvdWxkLmRlZXAuZXF1YWwoVzNDX0NBUFMpO1xuICAgICAgcHJvdG9jb2wuc2hvdWxkLmVxdWFsKCdXM0MnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBKU09OV1AgYW5kIFczQyBjYXBzIGlmIGJvdGggd2VyZSBwcm92aWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB7ZGVzaXJlZENhcHMsIHByb2Nlc3NlZEpzb253cENhcGFiaWxpdGllcywgcHJvY2Vzc2VkVzNDQ2FwYWJpbGl0aWVzLCBwcm90b2NvbH0gPSBwYXJzZUNhcHNGb3JJbm5lckRyaXZlcihCQVNFX0NBUFMsIFczQ19DQVBTKTtcbiAgICAgIGRlc2lyZWRDYXBzLnNob3VsZC5kZWVwLmVxdWFsKEJBU0VfQ0FQUyk7XG4gICAgICBwcm9jZXNzZWRKc29ud3BDYXBhYmlsaXRpZXMuc2hvdWxkLmRlZXAuZXF1YWwoQkFTRV9DQVBTKTtcbiAgICAgIHByb2Nlc3NlZFczQ0NhcGFiaWxpdGllcy5zaG91bGQuZGVlcC5lcXVhbChXM0NfQ0FQUyk7XG4gICAgICBwcm90b2NvbC5zaG91bGQuZXF1YWwoJ1czQycpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBkZWZhdWx0IGNhcGFiaWxpdGllcyBpbiByZXN1bHRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IHtkZXNpcmVkQ2FwcywgcHJvY2Vzc2VkSnNvbndwQ2FwYWJpbGl0aWVzLCBwcm9jZXNzZWRXM0NDYXBhYmlsaXRpZXN9ID0gcGFyc2VDYXBzRm9ySW5uZXJEcml2ZXIoQkFTRV9DQVBTLCBXM0NfQ0FQUywge30sIHtmb286ICdiYXInfSk7XG4gICAgICBkZXNpcmVkQ2Fwcy5zaG91bGQuZGVlcC5lcXVhbCh7Zm9vOiAnYmFyJywgLi4uQkFTRV9DQVBTfSk7XG4gICAgICBwcm9jZXNzZWRKc29ud3BDYXBhYmlsaXRpZXMuc2hvdWxkLmRlZXAuZXF1YWwoe2ZvbzogJ2JhcicsIC4uLkJBU0VfQ0FQU30pO1xuICAgICAgcHJvY2Vzc2VkVzNDQ2FwYWJpbGl0aWVzLmFsd2F5c01hdGNoLnNob3VsZC5kZWVwLmVxdWFsKHsnYXBwaXVtOmZvbyc6ICdiYXInLCAuLi5pbnNlcnRBcHBpdW1QcmVmaXhlcyhCQVNFX0NBUFMpfSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaWYgVzNDIGNhcHMgYXJlIG5vdCBwYXNzaW5nIGNvbnN0cmFpbnRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZXJyID0gcGFyc2VDYXBzRm9ySW5uZXJEcml2ZXIodW5kZWZpbmVkLCBXM0NfQ0FQUywge2hlbGxvOiB7cHJlc2VuY2U6IHRydWV9fSkuZXJyb3I7XG4gICAgICBlcnIubWVzc2FnZS5zaG91bGQubWF0Y2goLydoZWxsbycgY2FuJ3QgYmUgYmxhbmsvKTtcbiAgICAgIF8uaXNFcnJvcihlcnIpLnNob3VsZC5iZS50cnVlO1xuXG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBvbmx5IGFjY2VwdCBXM0MgY2FwcyB0aGF0IGhhdmUgcGFzc2luZyBjb25zdHJhaW50cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB3M2NDYXBzID0ge1xuICAgICAgICAuLi5XM0NfQ0FQUyxcbiAgICAgICAgZmlyc3RNYXRjaDogW1xuICAgICAgICAgIHtmb286ICdiYXInfSxcbiAgICAgICAgICB7aGVsbG86ICd3b3JsZCd9LFxuICAgICAgICBdLFxuICAgICAgfTtcbiAgICAgIGxldCB7ZGVzaXJlZENhcHMsIHByb2Nlc3NlZEpzb253cENhcGFiaWxpdGllcywgcHJvY2Vzc2VkVzNDQ2FwYWJpbGl0aWVzLCBwcm90b2NvbH0gPSBwYXJzZUNhcHNGb3JJbm5lckRyaXZlcihCQVNFX0NBUFMsIHczY0NhcHMsIHtoZWxsbzoge3ByZXNlbmNlOiB0cnVlfX0pO1xuICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSB7aGVsbG86ICd3b3JsZCcsIC4uLkJBU0VfQ0FQU307XG4gICAgICBkZXNpcmVkQ2Fwcy5zaG91bGQuZGVlcC5lcXVhbChleHBlY3RlZFJlc3VsdCk7XG4gICAgICBwcm9jZXNzZWRKc29ud3BDYXBhYmlsaXRpZXMuc2hvdWxkLmRlZXAuZXF1YWwoey4uLkJBU0VfQ0FQU30pO1xuICAgICAgcHJvY2Vzc2VkVzNDQ2FwYWJpbGl0aWVzLmFsd2F5c01hdGNoLnNob3VsZC5kZWVwLmVxdWFsKGluc2VydEFwcGl1bVByZWZpeGVzKGV4cGVjdGVkUmVzdWx0KSk7XG4gICAgICBwcm90b2NvbC5zaG91bGQuZXF1YWwoJ1czQycpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgYWRkIGFwcGl1bSBwcmVmaXhlcyB0byBXM0MgY2FwcyB0aGF0IGFyZSBub3Qgc3RhbmRhcmQgaW4gVzNDJywgZnVuY3Rpb24gKCkge1xuICAgICAgcGFyc2VDYXBzRm9ySW5uZXJEcml2ZXIodW5kZWZpbmVkLCB7XG4gICAgICAgIGFsd2F5c01hdGNoOiB7XG4gICAgICAgICAgcGxhdGZvcm1OYW1lOiAnRmFrZScsXG4gICAgICAgICAgcHJvcGVydHlOYW1lOiAnUFJPUF9OQU1FJyxcbiAgICAgICAgfSxcbiAgICAgIH0pLnByb2Nlc3NlZFczQ0NhcGFiaWxpdGllcy5zaG91bGQuZGVlcC5lcXVhbCh7XG4gICAgICAgIGFsd2F5c01hdGNoOiB7XG4gICAgICAgICAgcGxhdGZvcm1OYW1lOiAnRmFrZScsXG4gICAgICAgICAgJ2FwcGl1bTpwcm9wZXJ0eU5hbWUnOiAnUFJPUF9OQU1FJyxcbiAgICAgICAgfSxcbiAgICAgICAgZmlyc3RNYXRjaDogW3t9XSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbWVyZ2UgZXh0cmFuZW91cyBNSlNPTldQIGNhcHMgaW50byBXM0MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQganNvbndwQ2FwcyA9IHtcbiAgICAgICAgLi4uQkFTRV9DQVBTLFxuICAgICAgICBhdXRvbWF0aW9uTmFtZTogJ0Zha2UnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHtkZXNpcmVkQ2FwcywgcHJvY2Vzc2VkSnNvbndwQ2FwYWJpbGl0aWVzLCBwcm9jZXNzZWRXM0NDYXBhYmlsaXRpZXMsIHByb3RvY29sfSA9IHBhcnNlQ2Fwc0ZvcklubmVyRHJpdmVyKGpzb253cENhcHMsIHtcbiAgICAgICAgYWx3YXlzTWF0Y2g6IHtwbGF0Zm9ybU5hbWU6ICdGYWtlJywgcHJvcGVydHlOYW1lOiAnUFJPUF9OQU1FJ30sXG4gICAgICB9KTtcblxuICAgICAgLy8gV2UgZXhwZWN0IGEgY29tYm8gb2YganNvbndwIGNhcHMgYW5kIHczYyBwcm92aWRlZCBjYXBzIHdpdGggYGFwcGl1bTpgIHByZWZpeCBmb3Igbm9uLXN0YW5kYXJkIGNhcHNcbiAgICAgIGNvbnN0IGV4cGVjdGVkQ2FwcyA9IHt9O1xuXG4gICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgXy50b1BhaXJzKGpzb253cENhcHMpKSB7XG4gICAgICAgIGlmIChrZXkgIT09ICdwbGF0Zm9ybU5hbWUnKSB7XG4gICAgICAgICAgZXhwZWN0ZWRDYXBzW2BhcHBpdW06JHtrZXl9YF0gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBleHBlY3RlZENhcHNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBleHBlY3RlZENhcHNbJ2FwcGl1bTpwcm9wZXJ0eU5hbWUnXSA9ICdQUk9QX05BTUUnO1xuXG4gICAgICBwcm9jZXNzZWRXM0NDYXBhYmlsaXRpZXMuYWx3YXlzTWF0Y2guc2hvdWxkLmVxbChleHBlY3RlZENhcHMpO1xuICAgICAgZGVzaXJlZENhcHMuc2hvdWxkLmVxbCh7XG4gICAgICAgIC4uLmpzb253cENhcHMsXG4gICAgICAgIHByb3BlcnR5TmFtZTogJ1BST1BfTkFNRScsXG4gICAgICB9KTtcbiAgICAgIHByb2Nlc3NlZEpzb253cENhcGFiaWxpdGllcy5zaG91bGQuZXFsKGpzb253cENhcHMpO1xuICAgICAgcHJvdG9jb2wuc2hvdWxkLmVxdWFsKCdXM0MnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGZpeCBXM0MgY2FwcyBieSB1c2luZyBNSlNPTldQIGlmIGludmFsaWQgVzNDIGNhcHMgd2VyZSBwcm92aWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB3M2NDYXBhYmlsaXRpZXMgPSB7XG4gICAgICAgIGFsd2F5c01hdGNoOiB7cGxhdGZvcm1OYW1lOiAnRmFrZScsIHByb3BlcnR5TmFtZTogJ1BST1BfTkFNRSd9LFxuICAgICAgfTtcbiAgICAgIGxldCBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgZGV2aWNlTmFtZToge1xuICAgICAgICAgIHByZXNlbmNlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3Qge2Rlc2lyZWRDYXBzLCBwcm9jZXNzZWRKc29ud3BDYXBhYmlsaXRpZXMsIHByb2Nlc3NlZFczQ0NhcGFiaWxpdGllcywgcHJvdG9jb2x9ID0gcGFyc2VDYXBzRm9ySW5uZXJEcml2ZXIoey4uLkJBU0VfQ0FQU30sIHczY0NhcGFiaWxpdGllcywgY29uc3RyYWludHMpO1xuICAgICAgcHJvY2Vzc2VkVzNDQ2FwYWJpbGl0aWVzLnNob3VsZC5leGlzdDtcbiAgICAgIGRlc2lyZWRDYXBzLnNob3VsZC5lcWwoey4uLkJBU0VfQ0FQUywgcHJvcGVydHlOYW1lOiAnUFJPUF9OQU1FJ30pO1xuICAgICAgcHJvY2Vzc2VkSnNvbndwQ2FwYWJpbGl0aWVzLnNob3VsZC5lcWwoQkFTRV9DQVBTKTtcbiAgICAgIHByb3RvY29sLnNob3VsZC5lcXVhbCgnVzNDJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpbnNlcnRBcHBpdW1QcmVmaXhlcygpJywgZnVuY3Rpb24gKCkge1xuICAgIGl0KCdzaG91bGQgYXBwbHkgcHJlZml4ZXMgdG8gbm9uLXN0YW5kYXJkIGNhcGFiaWxpdGllcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGluc2VydEFwcGl1bVByZWZpeGVzKHtcbiAgICAgICAgc29tZUNhcDogJ3NvbWVDYXAnLFxuICAgICAgfSkuc2hvdWxkLmRlZXAuZXF1YWwoe1xuICAgICAgICAnYXBwaXVtOnNvbWVDYXAnOiAnc29tZUNhcCcsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBhcHBseSBwcmVmaXhlcyB0byBzdGFuZGFyZCBjYXBhYmlsaXRpZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpbnNlcnRBcHBpdW1QcmVmaXhlcyh7XG4gICAgICAgIGJyb3dzZXJOYW1lOiAnQnJvd3Nlck5hbWUnLFxuICAgICAgICBwbGF0Zm9ybU5hbWU6ICdQbGF0Zm9ybU5hbWUnLFxuICAgICAgfSkuc2hvdWxkLmRlZXAuZXF1YWwoe1xuICAgICAgICBicm93c2VyTmFtZTogJ0Jyb3dzZXJOYW1lJyxcbiAgICAgICAgcGxhdGZvcm1OYW1lOiAnUGxhdGZvcm1OYW1lJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgbm90IGFwcGx5IHByZWZpeGVzIHRvIGNhcGFiaWxpdGllcyB0aGF0IGFscmVhZHkgaGF2ZSBhIHByZWZpeCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGluc2VydEFwcGl1bVByZWZpeGVzKHtcbiAgICAgICAgJ2FwcGl1bTpzb21lQ2FwJzogJ3NvbWVDYXAnLFxuICAgICAgICAnbW96OnNvbWVPdGhlckNhcCc6ICdzb21lT3RoZXJDYXAnLFxuICAgICAgfSkuc2hvdWxkLmRlZXAuZXF1YWwoe1xuICAgICAgICAnYXBwaXVtOnNvbWVDYXAnOiAnc29tZUNhcCcsXG4gICAgICAgICdtb3o6c29tZU90aGVyQ2FwJzogJ3NvbWVPdGhlckNhcCcsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGFwcGx5IHByZWZpeGVzIHRvIG5vbi1wcmVmaXhlZCwgbm9uLXN0YW5kYXJkIGNhcGFiaWxpdGllczsgc2hvdWxkIG5vdCBhcHBseSBwcmVmaXhlcyB0byBhbnkgb3RoZXIgY2FwYWJpbGl0aWVzJywgZnVuY3Rpb24gKCkge1xuICAgICAgaW5zZXJ0QXBwaXVtUHJlZml4ZXMoe1xuICAgICAgICAnYXBwaXVtOnNvbWVDYXAnOiAnc29tZUNhcCcsXG4gICAgICAgICdtb3o6c29tZU90aGVyQ2FwJzogJ3NvbWVPdGhlckNhcCcsXG4gICAgICAgIGJyb3dzZXJOYW1lOiAnQnJvd3Nlck5hbWUnLFxuICAgICAgICBwbGF0Zm9ybU5hbWU6ICdQbGF0Zm9ybU5hbWUnLFxuICAgICAgICBzb21lT3RoZXJDYXA6ICdzb21lT3RoZXJDYXAnLFxuICAgICAgICB5ZXRBbm90aGVyQ2FwOiAneWV0QW5vdGhlckNhcCcsXG4gICAgICB9KS5zaG91bGQuZGVlcC5lcXVhbCh7XG4gICAgICAgICdhcHBpdW06c29tZUNhcCc6ICdzb21lQ2FwJyxcbiAgICAgICAgJ21vejpzb21lT3RoZXJDYXAnOiAnc29tZU90aGVyQ2FwJyxcbiAgICAgICAgYnJvd3Nlck5hbWU6ICdCcm93c2VyTmFtZScsXG4gICAgICAgIHBsYXRmb3JtTmFtZTogJ1BsYXRmb3JtTmFtZScsXG4gICAgICAgICdhcHBpdW06c29tZU90aGVyQ2FwJzogJ3NvbWVPdGhlckNhcCcsXG4gICAgICAgICdhcHBpdW06eWV0QW5vdGhlckNhcCc6ICd5ZXRBbm90aGVyQ2FwJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLiJ9
