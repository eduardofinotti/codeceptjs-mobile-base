'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _Object$assign = require('babel-runtime/core-js/object/assign')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _logger = require('../logger');

var _logger2 = _interopRequireDefault(_logger);

var _asyncbox = require('asyncbox');

var commands = {},
    extensions = {};

commands.getAttribute = function callee$0$0(attribute, elementId) {
  var params;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getAutomationId(elementId));

      case 2:
        elementId = context$1$0.sent;
        params = { attribute: attribute, elementId: elementId };
        context$1$0.next = 6;
        return _regeneratorRuntime.awrap(this.bootstrap.sendAction("element:getAttribute", params));

      case 6:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 7:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.setAttribute = function callee$0$0(attribute, value, elementId) {
  var params;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getAutomationId(elementId));

      case 2:
        elementId = context$1$0.sent;
        params = { attribute: attribute, value: value, elementId: elementId };
        context$1$0.next = 6;
        return _regeneratorRuntime.awrap(this.bootstrap.sendAction("element:setAttribute", params));

      case 6:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 7:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.getLocation = function callee$0$0(elementId) {
  var location;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getAutomationId(elementId));

      case 2:
        elementId = context$1$0.sent;
        context$1$0.next = 5;
        return _regeneratorRuntime.awrap(this.bootstrap.sendAction("element:getLocation", { elementId: elementId }));

      case 5:
        location = context$1$0.sent;

        location.x = location.centerx;
        location.y = location.centery;
        return context$1$0.abrupt('return', { "x": location.centerx, "y": location.centery });

      case 9:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.getLocationInView = function callee$0$0(elementId) {
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getLocation(elementId));

      case 2:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 3:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.getLocationValueByElementId = function callee$0$0(elementId) {
  var location;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getLocation(elementId));

      case 2:
        location = context$1$0.sent;
        return context$1$0.abrupt('return', [location.x, location.y]);

      case 4:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.getText = function callee$0$0(elementId) {
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getAutomationId(elementId));

      case 2:
        elementId = context$1$0.sent;
        context$1$0.next = 5;
        return _regeneratorRuntime.awrap(this.bootstrap.sendAction("element:getText", { elementId: elementId }));

      case 5:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 6:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.elementEnabled = function callee$0$0(elementId) {
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getAttribute("enabled", elementId));

      case 2:
        context$1$0.t0 = context$1$0.sent;
        return context$1$0.abrupt('return', context$1$0.t0 === 'true');

      case 4:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.elementDisplayed = function callee$0$0(elementId) {
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getAttribute("displayed", elementId));

      case 2:
        context$1$0.t0 = context$1$0.sent;
        return context$1$0.abrupt('return', context$1$0.t0 === 'true');

      case 4:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.elementSelected = function callee$0$0() {
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        _logger2['default'].info('elementSelcted not supported');
        return context$1$0.abrupt('return', false);

      case 2:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.getSize = function callee$0$0(elementId) {
  var location;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getAutomationId(elementId));

      case 2:
        elementId = context$1$0.sent;
        context$1$0.next = 5;
        return _regeneratorRuntime.awrap(this.bootstrap.sendAction("element:getLocation", { elementId: elementId }));

      case 5:
        location = context$1$0.sent;
        return context$1$0.abrupt('return', { "width": location.width, "height": location.height });

      case 7:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.setValue = function callee$0$0(keys, elementId) {
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        keys = keys.join();
        context$1$0.next = 3;
        return _regeneratorRuntime.awrap(this.setAttribute('Text', keys, elementId));

      case 3:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 4:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.setValueImmediate = function callee$0$0(keys, elementId) {
  var text;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        text = keys;

        if (keys instanceof Array) {
          text = keys.join("");
        }

        context$1$0.next = 4;
        return _regeneratorRuntime.awrap(this.click(elementId));

      case 4:
        context$1$0.next = 6;
        return _regeneratorRuntime.awrap((0, _asyncbox.sleep)(3000));

      case 6:
        context$1$0.next = 8;
        return _regeneratorRuntime.awrap(this.inputText(text));

      case 8:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 9:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.clear = function callee$0$0(elementId) {
  var text, length;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getText(elementId));

      case 2:
        context$1$0.t0 = context$1$0.sent;

        if (context$1$0.t0) {
          context$1$0.next = 5;
          break;
        }

        context$1$0.t0 = '';

      case 5:
        text = context$1$0.t0;
        length = text.length;

        if (!(length === 0)) {
          context$1$0.next = 11;
          break;
        }

        return context$1$0.abrupt('return', true);

      case 11:
        context$1$0.next = 13;
        return _regeneratorRuntime.awrap(this.setAttribute('Text', '', elementId));

      case 13:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 14:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.replaceValue = function callee$0$0(value, elementId) {
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.setAttribute('Text', value, elementId));

      case 2:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 3:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.click = function callee$0$0(elementId) {
  var location;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        context$1$0.next = 2;
        return _regeneratorRuntime.awrap(this.getLocationValueByElementId(elementId));

      case 2:
        location = context$1$0.sent;
        context$1$0.next = 5;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("click", location));

      case 5:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 6:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.touchUp = function callee$0$0() {
  var x = arguments.length <= 0 || arguments[0] === undefined ? 1 : arguments[0];
  var y = arguments.length <= 1 || arguments[1] === undefined ? 1 : arguments[1];
  var elementId = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

  var _location;

  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        if (elementId === this.sessionId) {
          elementId = null;
        }

        if (!elementId) {
          context$1$0.next = 10;
          break;
        }

        context$1$0.next = 4;
        return _regeneratorRuntime.awrap(this.getLocationValueByElementId(elementId));

      case 4:
        _location = context$1$0.sent;
        context$1$0.next = 7;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("touchUp", _location));

      case 7:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 10:
        context$1$0.next = 12;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("touchUp", [x, y]));

      case 12:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 13:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.touchDown = function callee$0$0(x, y) {
  var elementId = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

  var _location2;

  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        if (elementId === this.sessionId) {
          elementId = null;
        }

        if (!elementId) {
          context$1$0.next = 10;
          break;
        }

        context$1$0.next = 4;
        return _regeneratorRuntime.awrap(this.getLocationValueByElementId(elementId));

      case 4:
        _location2 = context$1$0.sent;
        context$1$0.next = 7;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("touchDown", _location2));

      case 7:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 10:
        context$1$0.next = 12;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("touchDown", [x, y]));

      case 12:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 13:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.touchMove = function callee$0$0(x, y) {
  var elementId = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

  var _location3;

  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        if (elementId === this.sessionId) {
          elementId = null;
        }

        if (!elementId) {
          context$1$0.next = 10;
          break;
        }

        context$1$0.next = 4;
        return _regeneratorRuntime.awrap(this.getLocationValueByElementId(elementId));

      case 4:
        _location3 = context$1$0.sent;
        context$1$0.next = 7;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("touchMove", _location3));

      case 7:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 10:
        context$1$0.next = 12;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("touchMove", [x, y]));

      case 12:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 13:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.touchLongClick = function callee$0$0(elementId, x, y, duration) {
  var _location4;

  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        if (elementId === this.sessionId) {
          elementId = null;
        }

        if (!elementId) {
          context$1$0.next = 11;
          break;
        }

        context$1$0.next = 4;
        return _regeneratorRuntime.awrap(this.getLocationValueByElementId(elementId));

      case 4:
        _location4 = context$1$0.sent;

        _location4.push(duration);
        context$1$0.next = 8;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("touchLongClick", _location4));

      case 8:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 11:
        context$1$0.next = 13;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("touchLongClick", [x, y, duration]));

      case 13:
        return context$1$0.abrupt('return', context$1$0.sent);

      case 14:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

commands.tap = function callee$0$0(elementId) {
  var x = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];
  var y = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];
  var count = arguments.length <= 3 || arguments[3] === undefined ? 1 : arguments[3];
  var result, i, tapResult;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        result = true;
        i = 0;

      case 2:
        if (!(i < count)) {
          context$1$0.next = 17;
          break;
        }

        if (!elementId) {
          context$1$0.next = 10;
          break;
        }

        context$1$0.next = 6;
        return _regeneratorRuntime.awrap(this.click(elementId));

      case 6:
        tapResult = context$1$0.sent;

        if (!tapResult) {
          result = false;
        }
        context$1$0.next = 14;
        break;

      case 10:
        context$1$0.next = 12;
        return _regeneratorRuntime.awrap(this.bootstrap.sendInputAction("click", [x, y]));

      case 12:
        tapResult = context$1$0.sent;

        if (!tapResult) {
          result = false;
        }

      case 14:
        i++;
        context$1$0.next = 2;
        break;

      case 17:
        return context$1$0.abrupt('return', result);

      case 18:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this);
};

_Object$assign(extensions, commands);
exports.commands = commands;
exports['default'] = extensions;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9lbGVtZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBZ0IsV0FBVzs7Ozt3QkFDTCxVQUFVOztBQUNoQyxJQUFJLFFBQVEsR0FBRyxFQUFFO0lBQUUsVUFBVSxHQUFHLEVBQUUsQ0FBQzs7QUFFbkMsUUFBUSxDQUFDLFlBQVksR0FBRyxvQkFBZ0IsU0FBUyxFQUFFLFNBQVM7TUFFdEQsTUFBTTs7Ozs7eUNBRFEsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUM7OztBQUFqRCxpQkFBUztBQUNMLGNBQU0sR0FBRyxFQUFFLFNBQVMsRUFBVCxTQUFTLEVBQUUsU0FBUyxFQUFULFNBQVMsRUFBRTs7eUNBQ3hCLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLHNCQUFzQixFQUFFLE1BQU0sQ0FBQzs7Ozs7Ozs7OztDQUN2RSxDQUFDOztBQUVGLFFBQVEsQ0FBQyxZQUFZLEdBQUcsb0JBQWdCLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUztNQUU3RCxNQUFNOzs7Ozt5Q0FEUSxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQzs7O0FBQWpELGlCQUFTO0FBQ0wsY0FBTSxHQUFHLEVBQUUsU0FBUyxFQUFULFNBQVMsRUFBRSxLQUFLLEVBQUwsS0FBSyxFQUFFLFNBQVMsRUFBVCxTQUFTLEVBQUU7O3lDQUMvQixJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsRUFBRSxNQUFNLENBQUM7Ozs7Ozs7Ozs7Q0FDdkUsQ0FBQzs7QUFFRixRQUFRLENBQUMsV0FBVyxHQUFHLG9CQUFnQixTQUFTO01BRTFDLFFBQVE7Ozs7O3lDQURNLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDOzs7QUFBakQsaUJBQVM7O3lDQUNZLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsU0FBUyxFQUFULFNBQVMsRUFBRSxDQUFDOzs7QUFBaEYsZ0JBQVE7O0FB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UUFBUSxDQUFDLENBQUM7UUFDM0IsUUFBUSxHQUFSLFFBQVE7cUJBQ0YsVUFBVSIsImZpbGUiOiJsaWIvY29tbWFuZHMvZWxlbWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IHNsZWVwIH0gZnJvbSAnYXN5bmNib3gnO1xubGV0IGNvbW1hbmRzID0ge30sIGV4dGVuc2lvbnMgPSB7fTtcblxuY29tbWFuZHMuZ2V0QXR0cmlidXRlID0gYXN5bmMgZnVuY3Rpb24gKGF0dHJpYnV0ZSwgZWxlbWVudElkKSB7XG4gIGVsZW1lbnRJZCA9IGF3YWl0IHRoaXMuZ2V0QXV0b21hdGlvbklkKGVsZW1lbnRJZCk7XG4gIGxldCBwYXJhbXMgPSB7IGF0dHJpYnV0ZSwgZWxlbWVudElkIH07XG4gIHJldHVybiBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zZW5kQWN0aW9uKFwiZWxlbWVudDpnZXRBdHRyaWJ1dGVcIiwgcGFyYW1zKTtcbn07XG5cbmNvbW1hbmRzLnNldEF0dHJpYnV0ZSA9IGFzeW5jIGZ1bmN0aW9uIChhdHRyaWJ1dGUsIHZhbHVlLCBlbGVtZW50SWQpIHtcbiAgZWxlbWVudElkID0gYXdhaXQgdGhpcy5nZXRBdXRvbWF0aW9uSWQoZWxlbWVudElkKTtcbiAgbGV0IHBhcmFtcyA9IHsgYXR0cmlidXRlLCB2YWx1ZSwgZWxlbWVudElkIH07XG4gIHJldHVybiBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zZW5kQWN0aW9uKFwiZWxlbWVudDpzZXRBdHRyaWJ1dGVcIiwgcGFyYW1zKTtcbn07XG5cbmNvbW1hbmRzLmdldExvY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xuICBlbGVtZW50SWQgPSBhd2FpdCB0aGlzLmdldEF1dG9tYXRpb25JZChlbGVtZW50SWQpO1xuICBsZXQgbG9jYXRpb24gPSBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zZW5kQWN0aW9uKFwiZWxlbWVudDpnZXRMb2NhdGlvblwiLCB7IGVsZW1lbnRJZCB9KTtcbiAgbG9jYXRpb24ueCA9IGxvY2F0aW9uLmNlbnRlcng7XG4gIGxvY2F0aW9uLnkgPSBsb2NhdGlvbi5jZW50ZXJ5O1xuICByZXR1cm4geyBcInhcIjogbG9jYXRpb24uY2VudGVyeCwgXCJ5XCI6IGxvY2F0aW9uLmNlbnRlcnkgfTtcbn07XG5cbmNvbW1hbmRzLmdldExvY2F0aW9uSW5WaWV3ID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXRMb2NhdGlvbihlbGVtZW50SWQpO1xufTtcblxuY29tbWFuZHMuZ2V0TG9jYXRpb25WYWx1ZUJ5RWxlbWVudElkID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xuICBsZXQgbG9jYXRpb24gPSBhd2FpdCB0aGlzLmdldExvY2F0aW9uKGVsZW1lbnRJZCk7XG4gIHJldHVybiBbbG9jYXRpb24ueCwgbG9jYXRpb24ueV07XG59O1xuXG5jb21tYW5kcy5nZXRUZXh0ID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xuICBlbGVtZW50SWQgPSBhd2FpdCB0aGlzLmdldEF1dG9tYXRpb25JZChlbGVtZW50SWQpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5ib290c3RyYXAuc2VuZEFjdGlvbihcImVsZW1lbnQ6Z2V0VGV4dFwiLCB7IGVsZW1lbnRJZCB9KTtcbn07XG5cbmNvbW1hbmRzLmVsZW1lbnRFbmFibGVkID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnRJZCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXRBdHRyaWJ1dGUoXCJlbmFibGVkXCIsIGVsZW1lbnRJZCkgPT09ICd0cnVlJztcbn07XG5cbmNvbW1hbmRzLmVsZW1lbnREaXNwbGF5ZWQgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldEF0dHJpYnV0ZShcImRpc3BsYXllZFwiLCBlbGVtZW50SWQpID09PSAndHJ1ZSc7XG59O1xuXG5jb21tYW5kcy5lbGVtZW50U2VsZWN0ZWQgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGxvZy5pbmZvKCdlbGVtZW50U2VsY3RlZCBub3Qgc3VwcG9ydGVkJyk7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbW1hbmRzLmdldFNpemUgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIGVsZW1lbnRJZCA9IGF3YWl0IHRoaXMuZ2V0QXV0b21hdGlvbklkKGVsZW1lbnRJZCk7XG4gIGxldCBsb2NhdGlvbiA9IGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRBY3Rpb24oXCJlbGVtZW50OmdldExvY2F0aW9uXCIsIHsgZWxlbWVudElkIH0pO1xuICByZXR1cm4ge1wid2lkdGhcIjpsb2NhdGlvbi53aWR0aCwgXCJoZWlnaHRcIjpsb2NhdGlvbi5oZWlnaHR9O1xufTtcblxuY29tbWFuZHMuc2V0VmFsdWUgPSBhc3luYyBmdW5jdGlvbiAoa2V5cywgZWxlbWVudElkKSB7XG4gIGtleXMgPSBrZXlzLmpvaW4oKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2V0QXR0cmlidXRlKCdUZXh0Jywga2V5cywgZWxlbWVudElkKTtcbn07XG5cbmNvbW1hbmRzLnNldFZhbHVlSW1tZWRpYXRlID0gYXN5bmMgZnVuY3Rpb24gKGtleXMsIGVsZW1lbnRJZCkge1xuICBsZXQgdGV4dCA9IGtleXM7XG4gIGlmIChrZXlzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICB0ZXh0ID0ga2V5cy5qb2luKFwiXCIpO1xuICB9XG5cbiAgYXdhaXQgdGhpcy5jbGljayhlbGVtZW50SWQpO1xuICBhd2FpdCBzbGVlcCgzMDAwKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuaW5wdXRUZXh0KHRleHQpO1xufTtcblxuY29tbWFuZHMuY2xlYXIgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIGxldCB0ZXh0ID0gKGF3YWl0IHRoaXMuZ2V0VGV4dChlbGVtZW50SWQpKSB8fCAnJztcbiAgbGV0IGxlbmd0aCA9IHRleHQubGVuZ3RoO1xuICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuc2V0QXR0cmlidXRlKCdUZXh0JywgJycsIGVsZW1lbnRJZCk7XG4gIH1cbn07XG5cbmNvbW1hbmRzLnJlcGxhY2VWYWx1ZSA9IGFzeW5jIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudElkKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLnNldEF0dHJpYnV0ZSgnVGV4dCcsIHZhbHVlLCBlbGVtZW50SWQpO1xufTtcblxuY29tbWFuZHMuY2xpY2sgPSBhc3luYyBmdW5jdGlvbiAoZWxlbWVudElkKSB7XG4gIGxldCBsb2NhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0TG9jYXRpb25WYWx1ZUJ5RWxlbWVudElkKGVsZW1lbnRJZCk7XG5cbiAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRJbnB1dEFjdGlvbihcImNsaWNrXCIsIGxvY2F0aW9uKTtcbn07XG5cbmNvbW1hbmRzLnRvdWNoVXAgPSBhc3luYyBmdW5jdGlvbiAoeCA9IDEsIHkgPSAxLCBlbGVtZW50SWQgPSBudWxsKSB7XG4gIGlmIChlbGVtZW50SWQgPT09IHRoaXMuc2Vzc2lvbklkKSB7XG4gICAgZWxlbWVudElkID0gbnVsbDtcbiAgfVxuICBpZiAoZWxlbWVudElkKSB7XG4gICAgbGV0IGxvY2F0aW9uID0gYXdhaXQgdGhpcy5nZXRMb2NhdGlvblZhbHVlQnlFbGVtZW50SWQoZWxlbWVudElkKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5ib290c3RyYXAuc2VuZElucHV0QWN0aW9uKFwidG91Y2hVcFwiLCBsb2NhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRJbnB1dEFjdGlvbihcInRvdWNoVXBcIiwgW3gsIHldKTtcbiAgfVxufTtcblxuY29tbWFuZHMudG91Y2hEb3duID0gYXN5bmMgZnVuY3Rpb24gKHgsIHksIGVsZW1lbnRJZCA9IG51bGwpIHtcbiAgaWYgKGVsZW1lbnRJZCA9PT0gdGhpcy5zZXNzaW9uSWQpIHtcbiAgICBlbGVtZW50SWQgPSBudWxsO1xuICB9XG5cbiAgaWYgKGVsZW1lbnRJZCkge1xuICAgIGxldCBsb2NhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0TG9jYXRpb25WYWx1ZUJ5RWxlbWVudElkKGVsZW1lbnRJZCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRJbnB1dEFjdGlvbihcInRvdWNoRG93blwiLCBsb2NhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRJbnB1dEFjdGlvbihcInRvdWNoRG93blwiLCBbeCwgeV0pO1xuICB9XG59O1xuXG5jb21tYW5kcy50b3VjaE1vdmUgPSBhc3luYyBmdW5jdGlvbiAoeCwgeSwgZWxlbWVudElkID0gbnVsbCkge1xuICBpZiAoZWxlbWVudElkID09PSB0aGlzLnNlc3Npb25JZCkge1xuICAgIGVsZW1lbnRJZCA9IG51bGw7XG4gIH1cbiAgaWYgKGVsZW1lbnRJZCkge1xuICAgIGxldCBsb2NhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0TG9jYXRpb25WYWx1ZUJ5RWxlbWVudElkKGVsZW1lbnRJZCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRJbnB1dEFjdGlvbihcInRvdWNoTW92ZVwiLCBsb2NhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRJbnB1dEFjdGlvbihcInRvdWNoTW92ZVwiLCBbeCwgeV0pO1xuICB9XG59O1xuXG5jb21tYW5kcy50b3VjaExvbmdDbGljayA9IGFzeW5jIGZ1bmN0aW9uIChlbGVtZW50SWQsIHgsIHksIGR1cmF0aW9uKSB7XG4gIGlmIChlbGVtZW50SWQgPT09IHRoaXMuc2Vzc2lvbklkKSB7XG4gICAgZWxlbWVudElkID0gbnVsbDtcbiAgfVxuICBpZiAoZWxlbWVudElkKSB7XG4gICAgbGV0IGxvY2F0aW9uID0gYXdhaXQgdGhpcy5nZXRMb2NhdGlvblZhbHVlQnlFbGVtZW50SWQoZWxlbWVudElkKTtcbiAgICBsb2NhdGlvbi5wdXNoKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5ib290c3RyYXAuc2VuZElucHV0QWN0aW9uKFwidG91Y2hMb25nQ2xpY2tcIiwgbG9jYXRpb24pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zZW5kSW5wdXRBY3Rpb24oXCJ0b3VjaExvbmdDbGlja1wiLCBbeCwgeSwgZHVyYXRpb25dKTtcbiAgfVxufTtcblxuY29tbWFuZHMudGFwID0gYXN5bmMgZnVuY3Rpb24gKGVsZW1lbnRJZCwgeCA9IDAsIHkgPSAwLCBjb3VudCA9IDEpIHtcbiAgbGV0IHJlc3VsdCA9IHRydWU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgIGlmIChlbGVtZW50SWQpIHtcbiAgICAgIGxldCB0YXBSZXN1bHQgPSBhd2FpdCB0aGlzLmNsaWNrKGVsZW1lbnRJZCk7XG4gICAgICBpZiAoIXRhcFJlc3VsdCkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHRhcFJlc3VsdCA9IGF3YWl0IHRoaXMuYm9vdHN0cmFwLnNlbmRJbnB1dEFjdGlvbihcImNsaWNrXCIsIFt4LCB5XSk7XG4gICAgICBpZiAoIXRhcFJlc3VsdCkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuT2JqZWN0LmFzc2lnbihleHRlbnNpb25zLCBjb21tYW5kcyk7XG5leHBvcnQgeyBjb21tYW5kcyB9O1xuZXhwb3J0IGRlZmF1bHQgZXh0ZW5zaW9ucztcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
